const itemTableData=JSON.parse(document.getElementById("itemTableData").dataset.item);function fillTableWithRunes(e,t){const n=itemTableData.find((t=>t.id==e));var a=null;if(null!=t){const e=document.getElementById("item-path");if(e){const a=e=>e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "),o=`/about/itemsView/${t}`,i=a(n.name),r=a(t);e.innerHTML=`\n                <a href="/about/items">Items</a> » \n                <a href="${o}">${r}</a> » \n                <b>${i}</b>`}}if(n){if(a=n.attributes?.runespellname,a){const e=runasRetronia[a];e&&(correctName=e.name)}else correctName=n.name;document.getElementById("itemImage").querySelector("div").innerHTML=`\n            <img src="/items/${n.attributes.clientid}.gif?v=1" \n                 style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">\n        `;document.getElementById("itemName").innerHTML=`\n            <h1 style="\n                font-family: Roboto, Verdana, Arial, Times New Roman, sans-serif; \n                font-size: 1.17em; \n                font-weight: bold; \n                height: auto; \n                line-height: 1.2; \n                overflow-wrap: break-word; \n                word-break: break-word;\n                margin: 0;"\n            >\n                ${correctName}\n            </h1>\n        `}else console.error(`Item com ID "${e}" não encontrado na tabela.`);const o=document.getElementById("tabelaAttributes");let i=o.querySelector("tbody");i||(i=document.createElement("tbody"),o.appendChild(i)),i.innerHTML="";const r=["useable","clientid","moveable","pickupable","raritytier","iscrossbow","isbow","absorbpercentfire","absorbpercentphysical","absorbpercentpoison","absorbpercentlifedrain","absorbpercentmanadrain","healthgain","healthticks","managain","manaticks","skillaxe","skillclub","skillsword","lightcolor","stackable","shoottype","absorbpercentenergy","showattributes","showcharges","group","hasheight","blockpathfind","destroyto","rotateto","rotatable","allowpickupable","blocking","showduration","transformequipto","stopduration","slottype","tier"],l=["attack","defense","attackspeed","slottype","Weapon Type","description","containersize","type","weight"];let s=0,c=[];for(let e in n.attributes){let t=n.attributes[e];r.includes(e)||("attackspeed"!==e||isNaN(t)||(e="interval attack",t=(t/1e3).toFixed(3)+" ms"),"weight"!==e||isNaN(t)||(t=(t/100).toFixed(2)+" oz"),"lightlevel"===e&&(e="special ability",t="provide a light source."),"runespellname"===e&&(e="Spell Word",t=`<a href="/about/spellView/${encodeURIComponent(t)}">${t}</a>`),"two-handed"===t&&(e="Hands",t="Two"),"weapontype"===e&&(e="Weapon Type"),c.push([e,t]))}c.sort(((e,t)=>{const n=l.indexOf(e[0]),a=l.indexOf(t[0]);return(-1===n?1/0:n)-(-1===a?1/0:a)})),c.forEach((([e,t])=>{"string"==typeof t&&(t=ucfirst(t));const n=s%2==0?"Odd":"Even";s++;const a=document.createElement("tr");a.classList.add(n);const o=document.createElement("td");o.classList.add("LabelV176"),o.textContent=`${ucfirst(e)}:`;const r=document.createElement("td");r.innerHTML=t,a.appendChild(o),a.appendChild(r),i.appendChild(a)}));const d={"one-handed":[{max_attack:31,tier:1},{max_attack:35,tier:2},{max_attack:39,tier:3},{max_attack:1/0,tier:4}],"two-handed":[{max_attack:44,tier:1},{max_attack:49,tier:2},{max_attack:59,tier:3},{max_attack:1/0,tier:4}],"distance-one-handed":[{max_attack:31,tier:1},{max_attack:35,tier:2},{max_attack:39,tier:3},{max_attack:1/0,tier:4}],"distance-two-handed":[{max_attack:0,tier:1},{max_attack:1,tier:2},{max_attack:3,tier:3},{max_attack:1/0,tier:4}],head:[{max_armor:6,tier:1},{max_armor:8,tier:2},{max_armor:10,tier:3},{max_armor:1/0,tier:4}],body:[{max_armor:10,tier:1},{max_armor:13,tier:2},{max_armor:15,tier:3},{max_armor:1/0,tier:4}],legs:[{max_armor:7,tier:1},{max_armor:8,tier:2},{max_armor:9,tier:3},{max_armor:1/0,tier:4}],feet:[{max_armor:1,tier:1},{max_armor:2,tier:2},{max_armor:3,tier:3},{max_armor:1/0,tier:4}],shield:[{max_defense:29,tier:1},{max_defense:33,tier:2},{max_defense:35,tier:3},{max_defense:1/0,tier:4}]};if(n.attributes.weapontype&&("wand"===n.attributes.weapontype||"quiver"===n.attributes.weapontype||"distance"===n.attributes.weapontype&&n.attributes.ammotype&&["bolt","arrow"].includes(n.attributes.ammotype)||["sword","club","axe","shield"].includes(n.attributes.weapontype))||n.attributes.slottype&&["head","body","legs","feet"].includes(n.attributes.slottype)){const e=n.attributes.raritytier||function(e){let t=1,n=0,a=null;if(e.attributes.slottype&&!e.attributes.weapontype)a=e.attributes.slottype.toLowerCase(),n=e.attributes.armor??0;else{if(!e.attributes.weapontype)return t;a=e.attributes.slottype?"two-handed":"one-handed",n=e.attributes.attack??0}if("shield"===e.attributes.weapontype){if(a="shield",n=e.attributes.defense??0,d[a])for(const e of d[a])if(e.max_defense&&n<=e.max_defense){t=e.tier;break}}else if(d[a])for(const e of d[a]){if(e.max_armor&&n<=e.max_armor){t=e.tier;break}if(e.max_attack&&n<=e.max_attack){t=e.tier;break}}return t}(n),t=document.createElement("tr"),a=document.createElement("td");a.classList.add("LabelV176"),a.textContent="Tier:";const o=document.createElement("td");o.textContent=e,t.appendChild(a),t.appendChild(o),i.appendChild(t)}const m="Helmet Of The Ancients"==n.name?"":function(e){const t={absorbpercentphysical:["Protection Physical","%"],absorbpercentfire:["Protection Fire","%"],absorbpercentpoison:["Protection Poison","%"],absorbpercentenergy:["Protection Energy","%"],absorbpercentmanadrain:["Protection Mana Drain","%"],absorbpercentlifedrain:["Protection Life Drain","%"],duration:["Duration Time","s"],charges:["Uses",""],skillfist:["Skill Fist",""],skillaxe:["Skill Axe",""],skillsword:["Skill Sword",""],skillclub:["Skill Club",""],manashield:["Give Mana Shield",""],suppressdrunk:["Suppress Drunk",""],healthgain:["Health Gain",""],healthticks:["Health Ticks",""],managain:["Mana Gain",""],manaticks:["Mana Ticks",""],invisible:["Make you Invisible",""]};let n="";for(const[a,o]of Object.entries(e))if(t[a]){let[i,r]=t[a],l=parseInt(o,10);if(i){if("duration"===a&&(l=(l/60).toFixed(0),r=" Min"),"healthticks"===a||"manaticks"===a)continue;if("charges"===a)n+=`Has ${l} ${i}<br>`;else if(l<1||"manashield"===a)n+=`${i}<br>`;else if("managain"===a){n+=`+${l}${r} ${i} / ${(e.manaticks/1e3).toFixed(1)} Secs<br>`}else if("healthgain"===a){n+=`+${l}${r} ${i} / ${(e.healthticks/1e3).toFixed(1)} Secs<br>`}else n+=`+${l}${r} ${i}<br>`}}return n=n.replace(/<br>/g,", ").replace(/,(?=[^,]*$)/,"."),n}(n.attributes);if(m){const e=document.createElement("tr"),t=document.createElement("td");t.classList.add("LabelV176"),t.textContent="Attributes:";const n=document.createElement("td");n.innerHTML=m,e.appendChild(t),e.appendChild(n),i.appendChild(e)}const p=!1;let u=[],h=null,b=null;if(a){const e=allItems.filter((e=>e.attributes?.runespellname===a));e.length>0&&(h=e[0],b=parseInt(h.attributes.clientid,10),creatures.forEach((e=>{e.loot.forEach((t=>{if(String(t.clientId).toLowerCase()===String(b).toLowerCase()){const n=t.chance/1e5,a=`${(100*n).toFixed(2)}%`;u.push({monster:e.name,chance:a,chance_numeric:n})}}))})))}else{{const e=n.name;creatures.forEach((t=>{t.loot.forEach((n=>{if(String(n.name).toLowerCase()===e.toLowerCase()){const e=n.chance/1e5,a=`${(100*e).toFixed(2)}%`;u.push({monster:t.name,chance:a,chance_numeric:e})}}))})),h=allItems.find((t=>t.name&&t.name.toLowerCase()===e.toLowerCase()))}p,h&&h.attributes?.clientid?(b=h.attributes.clientid,generalId=h.id):console.log("Client ID não encontrado para o item.")}if(u.sort(((e,t)=>t.chance_numeric-e.chance_numeric)),u.forEach((e=>delete e.chance_numeric)),s=0,null==a){s++;const e=document.createElement("tr");e.classList.add(s%2==0?"Odd":"Even");const t=document.createElement("td");t.classList.add("LabelV176"),t.textContent="Dropped By:";const n=document.createElement("td");if(n.style.textAlign="justify",u.length>0){const e=u.map((e=>`<a href='/about/creaturesView/${e.monster}'>${e.monster} (${e.chance})</a>`)).join(", ");n.innerHTML=e}else n.textContent="No monsters found.";e.appendChild(t),e.appendChild(n),i.appendChild(e);let a=[],o=[];npcs.forEach((e=>{e.buy.forEach((t=>{(t.clientId&&t.clientId===b||t.type&&t.type==generalId)&&a.push({name:e.name,price:t.price,location:e.location,position:e.position})})),e.sell.forEach((t=>{(t.clientId&&t.clientId===b||t.type&&t.type===b)&&o.push({name:e.name,price:t.price,location:e.location,position:e.position})}))})),function(e){const t=document.getElementById(e);if(!t)return void console.error(`Tabela com ID "${e}" não encontrada.`);const n=t.getElementsByTagName("tr");let a=0;for(let e=0;e<n.length;e++){const t=n[e];"none"!==window.getComputedStyle(t).display&&(t.className=a%2==0?"Even":"Odd",a++)}}("correctColors");const r=document.createElement("tr");r.classList.add("Odd");const l=document.createElement("td");l.setAttribute("colspan","2");const c=document.createElement("div");if(c.style.display="flex",l.appendChild(c),r.appendChild(l),i.appendChild(e),a.length>0){const e=document.createElement("div");e.style.width="48%",e.style.padding="10px";const t=document.createElement("h3");t.textContent="Buy Offers",e.appendChild(t);const n=document.createElement("table");n.style.width="100%",n.style.borderCollapse="collapse";const o=document.createElement("thead"),i=document.createElement("tr");["NPC","Location","Price"].forEach((e=>{const t=document.createElement("th");t.style.textAlign="left",t.style.padding="5px",t.textContent=e,i.appendChild(t)})),o.appendChild(i),n.appendChild(o);const r=document.createElement("tbody");a.forEach((e=>{const t=document.createElement("tr"),n=document.createElement("td");n.style.backgroundColor="hsla(0,0%,100%,.46)",n.style.boxShadow="0 0 10px rgba(0,0,0,.5)";const a=document.createElement("a"),o=`${e.position[0]},${e.position[1]},${e.position[2]}`;a.href=`/about/npcs/${e.name}#${o}:1`,a.innerHTML=`<span>${e.name.charAt(0).toUpperCase()+e.name.slice(1).toLowerCase()}</span>`,n.appendChild(a),t.appendChild(n);const i=document.createElement("td");i.style.backgroundColor="hsla(0,0%,100%,.46)",i.style.boxShadow="0 0 10px rgba(0,0,0,.5)",i.textContent=e.location,t.appendChild(i);const l=document.createElement("td");l.style.padding="5px",l.style.backgroundColor="hsla(0,0%,100%,.46)",l.style.boxShadow="0 0 10px rgba(0,0,0,.5)",l.textContent=`${e.price} gold`,t.appendChild(l),r.appendChild(t)})),n.appendChild(r),e.appendChild(n),c.appendChild(e)}else{const e=document.createElement("div");e.style.width="48%",e.style.padding="10px";const t=document.createElement("h3");t.textContent="Buy Offers",e.appendChild(t);const n=document.createElement("p");n.textContent="No buy offers available.",e.appendChild(n),c.appendChild(e)}if(o.length>0){const e=document.createElement("div");e.style.width="48%",e.style.padding="10px";const t=document.createElement("h3");t.textContent="Sell Offers",e.appendChild(t);const n=document.createElement("table");n.style.width="100%",n.style.borderCollapse="collapse";const a=document.createElement("thead"),i=document.createElement("tr");["NPC","Location","Price"].forEach((e=>{const t=document.createElement("th");t.style.textAlign="left",t.style.padding="5px",t.textContent=e,i.appendChild(t)})),a.appendChild(i),n.appendChild(a);const r=document.createElement("tbody");o.forEach((e=>{const t=document.createElement("tr"),n=document.createElement("td");n.style.backgroundColor="hsla(0,0%,100%,.46)",n.style.boxShadow="0 0 10px rgba(0,0,0,.5)";const a=document.createElement("a"),o=`${e.position[0]},${e.position[1]},${e.position[2]}`;a.href=`/about/npcs/${e.name}#${o}:1`,a.innerHTML=`<span>${e.name.charAt(0).toUpperCase()+e.name.slice(1).toLowerCase()}</span>`,n.appendChild(a),t.appendChild(n);const i=document.createElement("td");i.style.backgroundColor="hsla(0,0%,100%,.46)",i.style.boxShadow="0 0 10px rgba(0,0,0,.5)",i.textContent=e.location,t.appendChild(i);const l=document.createElement("td");l.style.padding="5px",l.style.backgroundColor="hsla(0,0%,100%,.46)",l.style.boxShadow="0 0 10px rgba(0,0,0,.5)",l.textContent=`${e.price} gold`,t.appendChild(l),r.appendChild(t)})),n.appendChild(r),e.appendChild(n),c.appendChild(e)}else{const e=document.createElement("div");e.style.width="48%",e.style.padding="10px";const t=document.createElement("h3");t.textContent="Sell Offers",e.appendChild(t);const n=document.createElement("p");n.textContent="No sell offers available.",e.appendChild(n),c.appendChild(e)}i.appendChild(r)}else{s++;let e=document.createElement("tr");e.classList.add(s%2==0?"Odd":"Even");let t=document.createElement("td");t.classList.add("LabelV176"),t.textContent="Group:";let n=document.createElement("td");n.style.textAlign="justify",n.textContent="",n.textContent=runas[a][1],e.appendChild(t),e.appendChild(n),i.appendChild(e),s++,e=document.createElement("tr"),e.classList.add(s%2==0?"Odd":"Even"),t=document.createElement("td"),t.classList.add("LabelV176"),t.textContent="Magic Level:",n=document.createElement("td"),n.style.textAlign="justify",n.textContent="",n.textContent=runasRetronia[a].mlvl,e.appendChild(t),e.appendChild(n),i.appendChild(e)}}function ucfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}fillTableWithRunes(foundItemId,null);