let initialPageHeight=null;function toggleRow(e){const t=e.closest("tr").nextElementSibling;"none"===window.getComputedStyle(t).display?(t.style.display="table-row",e.src="/images/circle-symbol-minus.gif"):(t.style.display="none",e.src="/images/circle-symbol-plus.gif")}document.addEventListener("DOMContentLoaded",(function(){const e=document.documentElement,t=document.body;initialPageHeight=Math.max(e.scrollHeight,e.offsetHeight,t.scrollHeight,t.offsetHeight),document.documentElement.style.height=initialPageHeight+"px",document.body.style.height=initialPageHeight+"px"}));let tooltipIconElement,selectedItemId=null,isPercentageView=!1,lastTooltipValues={};function showTooltip(e,t,o,n){const l=document.getElementById("HelperDivContainer"),i=(n/1e5*100).toFixed(2)+"%";document.getElementById("HelperDivHeadline").innerText=t,document.getElementById("HelperDivText").innerHTML=`Quantity: 0 ~ ${o}<br>Chance: ${i}`;const c=e.currentTarget.getBoundingClientRect();l.style.display="block",l.style.position="fixed",l.style.left=`${c.right+3}px`,l.style.top=`${c.top+30}px`}function hideTooltip(){document.getElementById("HelperDivContainer").style.display="none"}function toggleSelection(e,t,o,n,l){const i=document.getElementById(t);selectedItemId===t?(i.style.border="2px solid rgba(121, 61, 3, 0.65)",hideTooltip(),selectedItemId=null):(selectedItemId&&(document.getElementById(selectedItemId).style.border="2px solid rgba(121, 61, 3, 0.65)"),selectedItemId=t,lastTooltipValues={itemName:o,maxCount:n,chance:l},showTooltip(e,o,n,l)),e.stopPropagation()}function togglePercentageView(e,t){if(e.preventDefault(),isPercentageView=!isPercentageView,t.innerHTML=isPercentageView?"Hide % chance":"Toggle % chance",selectedItemId){const t=lastTooltipValues.chance;showTooltip(e,lastTooltipValues.itemName,lastTooltipValues.maxCount,isPercentageView?(t/1e5*100).toFixed(2)+"%":t)}}function showTooltipWithIcon(e,t,o,n){showTooltip(e,t,o,n),tooltipIconElement=document.createElement("img"),tooltipIconElement.src="/assets/tibiarl/images/mmorpg/info.gif",tooltipIconElement.style.position="absolute",tooltipIconElement.style.width="20px",tooltipIconElement.style.border="0px",tooltipIconElement.style.pointerEvents="none",tooltipIconElement.style.zIndex="1000",document.body.appendChild(tooltipIconElement),moveTooltipIcon(e)}function moveTooltipIcon(e){tooltipIconElement&&(tooltipIconElement.style.left=e.pageX+5+"px",tooltipIconElement.style.top=e.pageY-20+"px")}function hideTooltipIcon(){tooltipIconElement&&(document.body.removeChild(tooltipIconElement),tooltipIconElement=null),hideTooltip()}

const creaturesData=JSON.parse(document.getElementById("creaturesData").getAttribute("data-creatures")),PHP_INT_MAX=0x8000000000000000,rarityCategories={Common:[10001,PHP_INT_MAX],Uncommon:[5001,1e4],"Semi-rare":[1001,5e3],Rare:[2,1e3],"Extremely Rare":[1,1]};function fillCreatureTable(e){const a=creaturesData.find((a=>a.name.toLowerCase().replace(/\s+/g,"")===e.toLowerCase().replace(/\s+/g,"")));if(!a)return void console.error("Creature not found");const n=a.type;let s=`/outfits/animoutfit.php?id=${n}.gif`;const i={Amazon:{addons:0,head:113,body:120,legs:95,feet:115},Assassin:{addons:0,head:95,body:95,legs:95,feet:95},Bandit:{addons:0,head:58,body:40,legs:24,feet:95},Ferumbras:{addons:0,head:57,body:113,legs:95,feet:113},"Wild Warrior":{addons:0,head:38,body:38,legs:38,feet:38},"Black Knight":{addons:0,head:95,body:95,legs:95,feet:95},Fury:{addons:3,head:94,body:77,legs:96,feet:0},Hunter:{addons:0,head:95,body:116,legs:120,feet:115},Smuggler:{addons:0,head:95,body:0,legs:113,feet:115},Stalker:{addons:0,head:97,body:116,legs:95,feet:95},Valkyrie:{addons:0,head:113,body:38,legs:76,feet:96},Warlock:{addons:0,head:0,body:52,legs:128,feet:95}},t=a.name;if(i[t]){const{addons:e,head:a,body:o,legs:c,feet:r}=i[t];s=`/outfits/animoutfit.php?id=${n}&addons=${e}&head=${a}&body=${o}&legs=${c}&feet=${r}`}document.getElementById("creatureDataBody").innerHTML=`\n        <tr class="Even">\n            <td style="width: 100px; height: 100px; padding: 0;">\n                <div style="position: relative; width: 100px; height: 100px;">\n                    <img src="${s}?v=1" style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%)" />\n                </div>\n            </td>\n            <td style="width: 99%">\n                <h1 style="font-family: 'Martel', sans-serif; font-size: 44px; font-weight: normal; height: 25px">${t}</h1>\n            </td>\n        </tr>\n    `,document.getElementById("health").innerHTML=`${a.health} HP`,document.getElementById("experience").innerHTML=`${a.experience} XP`;let o=0,c=[];a.maxCombo.forEach((e=>{o+=e.value;let a="";switch(e.name){case"fire":case"firefield":case"firecondition":a='<img src="/images/tbIcons/damage/Fire_Damage_Icon.gif" class="tbl-icons">';break;case"energy":case"energyfield":case"energycondition":a='<img src="/images/tbIcons/damage/Electrified_Icon.gif" class="tbl-icons">';break;case"poison":case"poisonfield":case"poisoncondition":a='<img src="/images/tbIcons/damage/Poisoned_Icon.gif" class="tbl-icons">';break;case"lifedrain":a='<img src="/images/tbIcons/damage/Life_Drain_Icon.gif" class="tbl-icons">';break;case"paralyze":case"speed":a='<img src="/images/tbIcons/damage/Slowed_Icon.gif" class="tbl-icons">';break;case"invisible":a='<img src="/images/tbIcons/damage/Invisible_Icon.gif" class="tbl-icons">';break;case"manadrain":a='<img src="/images/tbIcons/damage/Mana_Drain_Icon.gif" class="tbl-icons">';break;case"physical":case"melee":a='<img src="/images/tbIcons/damage/Physical_Damage_Icon.gif" class="tbl-icons">';break;case"ice":a='<img src="/images/tbIcons/damage/Freezing_Icon.gif" class="tbl-icons">';break;case"drunk":a='<img src="/images/tbIcons/damage/Drunk.gif" class="tbl-icons">';break;default:a=""}let n=!1;c.forEach((s=>{s.icon===a&&(s.value+=e.value,n=!0)})),n||c.push({icon:a,value:e.value})})),c.sort(((e,a)=>a.value-e.value)),document.getElementById("maxDmg").innerHTML=`Total: ${o} / `+c.map((e=>`${e.icon} ${e.value}`)).join(" "),document.getElementById("summonable").innerHTML=0===a.summonable?'<img src="/assets/tibiarl/images/premiumfeatures/icon_no.png">':'<img src="/assets/tibiarl/images/premiumfeatures/icon_yes.png">',document.getElementById("convinceable").innerHTML=0===a.convinceable?'<img src="/assets/tibiarl/images/premiumfeatures/icon_no.png">':'<img src="/assets/tibiarl/images/premiumfeatures/icon_yes.png">',0!==a.manaCost?(document.getElementById("manaCost").innerText=a.manaCost,document.getElementById("manaCostRow").style.display="table-row"):document.getElementById("manaCostRow").style.display="none";const r=document.getElementById("sounds");if(creaturesData&&a.voices&&a.voices.length>1){const e=a.voices.join(", ");r.innerHTML=e}else r.innerHTML="No known sounds.";const l=document.getElementById("abilities");let g="";const m=[];let d=0;function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}a.attacks.forEach(((e,n)=>{if(!m.includes(e)){let s="";switch(e){case"fire":case"firefield":case"firecondition":s='<img src="/images/tbIcons/damage/Fire_Damage_Icon.gif" class="tbl-icons">';break;case"energy":case"energyfield":case"energycondition":s='<img src="/images/tbIcons/damage/Electrified_Icon.gif" class="tbl-icons">';break;case"poison":case"poisonfield":case"poisoncondition":s='<img src="/images/tbIcons/damage/Poisoned_Icon.gif" class="tbl-icons">';break;case"lifedrain":s='<img src="/images/tbIcons/damage/Life_Drain_Icon.gif" class="tbl-icons">';break;case"paralyze":s='<img src="/images/tbIcons/damage/Slowed_Icon.gif" class="tbl-icons">';break;case"invisible":s='<img src="/images/tbIcons/damage/Invisible_Icon.gif" class="tbl-icons">';break;case"manadrain":s='<img src="/images/tbIcons/damage/Mana_Drain_Icon.gif" class="tbl-icons">';break;case"physical":case"melee":s='<img src="/images/tbIcons/damage/Physical_Damage_Icon.gif" class="tbl-icons">';break;case"speed":s='<img src="/images/tbIcons/damage/Haste_Icon.gif" class="tbl-icons">';break;case"ice":s='<img src="/images/tbIcons/damage/Freezing_Icon.gif" class="tbl-icons">';break;case"drunk":s='<img src="/images/tbIcons/damage/Drunk.gif" class="tbl-icons">'}switch(m.push(e),e){case"manadrain":e="Mana Drain";break;case"firefield":e="Fire Field";break;case"poisoncondition":e="Poison Condition";break;case"firecondition":e="Fire Condition";break;case"energycondition":e="Energy Condition";break;case"lifedrain":e="Life Drain"}"outfit"!==e&&(g+=s+b(e)+(n!==a.attacks.length-1?", ":"")),4===d&&(g+="<br>"),d++}})),l.innerHTML=g;const f=document.getElementById("immunities");let u="",p=0;function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}Object.entries(a.immunities).forEach((([e,a])=>{if(1===a){let a="";switch(e){case"fire":a='<img src="/images/tbIcons/damage/Fire_Damage_Icon.gif" class="tbl-icons">';break;case"energy":a='<img src="/images/tbIcons/damage/Electrified_Icon.gif" class="tbl-icons">';break;case"poison":a='<img src="/images/tbIcons/damage/Poisoned_Icon.gif" class="tbl-icons">';break;case"lifedrain":a='<img src="/images/tbIcons/damage/Life_Drain_Icon.gif" class="tbl-icons">';break;case"paralyze":a='<img src="/images/tbIcons/damage/Slowed_Icon.gif" class="tbl-icons">';break;case"invisible":a='<img src="/images/tbIcons/damage/Invisible_Icon.gif" class="tbl-icons">';break;case"ice":a='<img src="/images/tbIcons/damage/Freezing_Icon.gif" class="tbl-icons">';break;case"physical":a='<img src="/images/tbIcons/damage/Physical_Damage_Icon.gif" class="tbl-icons">'}"lifedrain"===e&&(e="Life Drain"),"outfit"!==e&&(u+=a+b(e)+", "),4 === p && (u = u.replace(/,\s*$/, "") + "<br>"), p++}})),""===u&&(u="No known immunities."),f.innerHTML=u,table=document.getElementById("correctColors"),rows=table.getElementsByTagName("tr");let I=0;for(let e=0;e<rows.length;e++){const a=rows[e];"none"!==window.getComputedStyle(a).display&&(a.className=I%2==0?"Even":"Odd",I++)}function y(e,a){if("halloween coin"===e.name||"pumpkinhead"===e.name)return"";const n=`<img src="/items/${e.clientId}.gif" style="width: 32px;">`,s=`<a href="/about/itemPage/${encodeURIComponent(e.name.toLowerCase()).replace(/%20/g,"+")}">\n            ${"true"===e.stackable?`(0 ~ ${e.countmax})`:""} \n            ${b(e.name)}\n        </a>`;return`\n            <div style="width: 60px; text-align: center;">\n                <div class="itemImg outfitImg" id="${e.clientId}-${a}" style="background-color: transparent; margin: 0 auto;"\n                    onmouseover="showTooltipWithIcon(event, '${b(e.name)}', ${e.countmax}, ${e.chance})"\n                    onmousemove="moveTooltipIcon(event)"\n                    onmouseout="hideTooltipIcon()"\n                    onclick="toggleSelection(event, '${e.clientId}-${a}', '${b(e.name)}', ${e.countmax}, ${e.chance})">\n                    ${n}\n                </div>\n                <p style="margin: 5px 0; font-size: 8pt">${s}</p>\n            </div>\n        `}function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}!function(){const e=document.getElementById("lootTable");e.innerHTML="";for(const[n,s]of Object.entries(rarityCategories)){const i=a.loot.filter((e=>e.chance>=s[0]&&e.chance<=s[1]));if(i.length>0){let a=document.createElement("tr");a.classList.add("LabelH"),a.innerHTML=`\n                    <td colspan="3" style="font-weight: bold; text-align: left;">\n                        ${n}\n                        <img src="/images/circle-symbol-minus.gif" style="float: right; cursor: pointer;" onclick="toggleRow(this)">\n                        ${"Common"===n?'\n                            <span style="float: right; margin-right: 5px">\n                                \n                            </span>':""}\n                    </td>\n                `,e.appendChild(a);let s=document.createElement("tr");s.innerHTML=`\n                    <td colspan="3" style="background-color: #f1e0c6">\n                        <div style="display: flex; flex-wrap: wrap; gap: 2px;">\n                            ${i.map(((e,a)=>y(e,a))).join("")}\n                        </div>\n                    </td>\n                `,e.appendChild(s)}}}()}

fillCreatureTable(creatureName);
